<!DOCTYPE html>
<html>
<body>

	<h2>Send a message</h2>
	<form class="auth-form" action="/send" method="post">
    	<label for="recipient">recipient:</label>
    	<input type="text" name="recipient"><br>
    	<label for="content">Message:</label>
    	<input type="text" name="content"><br>
		<br>
		<input type="submit" value="Submit">
	</form><br><br>

	<h4>Create user</h4>
	<form action="/create-user" method="post">
    	<label for="username">username:</label>
    	<input type="text" name="username"><br>
    	<label for="password">password:</label>
    	<input type="text" name="password"><br>
		<br>
		<input type="submit" value="Submit">
	</form>

	<script>
		var forms = document.querySelectorAll('.auth-form');
		for (var i = 0; i < forms.length; i++) {
		  forms[i].addEventListener('submit', function(event) {
		    event.preventDefault();
		    var xhr = new XMLHttpRequest();
		    xhr.open(event.target.method, event.target.action, true);
		    xhr.setRequestHeader('X-Username', 'mingy');
		    xhr.setRequestHeader('X-Password', '123');
		    xhr.onreadystatechange = function() {
		      if (xhr.readyState === 4 && xhr.status === 200) {
				console.log(xhr.responseText);
		      }
		    };
		    xhr.send(new FormData(event.target));
		  });
		}
	</script>

</body>
</html>